window.__require=function t(e,o,n){function r(i,p){if(!o[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var s="function"==typeof __require&&__require;if(!p&&s)return s(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return r(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({BoardIdleState:[function(t,e,o){"use strict";cc._RF.push(e,"0b5ac/+CmRO0qya/DimpWRC","BoardIdleState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BoardIdleState=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(t("../State").State);o.BoardIdleState=a,cc._RF.pop()},{"../State":"State"}],BoardManager:[function(t,e,o){"use strict";cc._RF.push(e,"5e017ICjttIg4CfDOeiIcvm","BoardManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GameConfig"),p=t("./ReelHandler"),c=t("./States/BoardStates/BoardIdleState"),s=t("./States/BoardStates/BoardStartSpinState"),u=t("./States/BoardStates/BoardStartStopState"),l=t("./States/FSM"),S=cc._decorator,f=S.ccclass,d=S.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reelLayout=null,e.reelPrefab=null,e._reels=[],e.spinStartTime=0,e}var o;return r(e,t),o=e,e.getInstance=function(){return this.inst},Object.defineProperty(e.prototype,"reels",{get:function(){return this._reels},set:function(t){this._reels=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o.inst=this},e.prototype.initReels=function(){for(var t=0;t<i.GameConfig.NUM_VISIBLE_REELS;t++){var e=cc.instantiate(this.reelPrefab);e.parent=this.reelLayout.node;var o=e.getComponent(p.default);o.init(t),this.reels.push(o)}this.reelLayout.updateLayout(),cc.tween(this.reelLayout.node).to(.25,{opacity:255}).start(),this.setState(new c.BoardIdleState(this))},e.prototype.onReceivedResponse=function(){var t=this,e=Date.now()-this.spinStartTime,o=function(){t.setState(new u.BoardStopState(t))};e>=i.GameConfig.STOP_DELAY_WHEN_RECIEVE_RESPONSE?o():setTimeout(function(){o()},i.GameConfig.STOP_DELAY_WHEN_RECIEVE_RESPONSE-e)},e.prototype.spinReels=function(){this.spinStartTime=Date.now(),this.setState(new s.BoardStartSpinState(this))},e.prototype.areAllReelsSpinning=function(){return this.reels.every(function(t){return t.isSpinning()})},e.prototype.areAllReelsIdling=function(){return this.reels.every(function(t){return t.isIdle()})},e.inst=null,a([d(cc.Layout)],e.prototype,"reelLayout",void 0),a([d(cc.Prefab)],e.prototype,"reelPrefab",void 0),o=a([f],e)}(l.FSM);o.default=_,cc._RF.pop()},{"./GameConfig":"GameConfig","./ReelHandler":"ReelHandler","./States/BoardStates/BoardIdleState":"BoardIdleState","./States/BoardStates/BoardStartSpinState":"BoardStartSpinState","./States/BoardStates/BoardStartStopState":"BoardStartStopState","./States/FSM":"FSM"}],BoardSpinningState:[function(t,e,o){"use strict";cc._RF.push(e,"a2ba9VHm4BMWo6tHFABHe5z","BoardSpinningState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BoardSpinningState=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(t("../State").State);o.BoardSpinningState=a,cc._RF.pop()},{"../State":"State"}],BoardStartSpinState:[function(t,e,o){"use strict";cc._RF.push(e,"31009kQoeZCaY7JwwByuZIa","BoardStartSpinState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BoardStartSpinState=void 0;var a=t("../../GameConfig"),i=t("../State"),p=t("./BoardSpinningState"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){this.stateMachine.reels.forEach(function(t){setTimeout(function(){t.startSpin()},1e3*a.GameConfig.DELAY_TIME_ON_START[t.reelIndex])}),this.stateMachine.setState(new p.BoardSpinningState(this.stateMachine))},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(i.State);o.BoardStartSpinState=c,cc._RF.pop()},{"../../GameConfig":"GameConfig","../State":"State","./BoardSpinningState":"BoardSpinningState"}],BoardStartStopState:[function(t,e,o){"use strict";cc._RF.push(e,"2c333h3cNZO55DvGxy4sCLz","BoardStartStopState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BoardStopState=void 0;var a=t("../../GameConfig"),i=t("../State"),p=t("./BoardStoppingState"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isStopped=!1,e}return r(e,t),e.prototype.onStart=function(){},e.prototype.onUpdate=function(){this.stateMachine.areAllReelsSpinning()&&(this.stateMachine.reels.forEach(function(t){setTimeout(function(){t.stopSpin()},1e3*a.GameConfig.DELAY_TIME_ON_STOP[t.reelIndex])}),this.stateMachine.setState(new p.BoardStoppingState(this.stateMachine)))},e.prototype.onExit=function(){},e}(i.State);o.BoardStopState=c,cc._RF.pop()},{"../../GameConfig":"GameConfig","../State":"State","./BoardStoppingState":"BoardStoppingState"}],BoardStoppedState:[function(t,e,o){"use strict";cc._RF.push(e,"c6da0/NUyBCMb0fp+FSUsH3","BoardStoppedState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BoardStoppedState=void 0;var a=t("../../SlotMachine"),i=t("../State"),p=t("./BoardIdleState"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){a.default.getInstance().spinButton.interactable=!0,this.stateMachine.setState(new p.BoardIdleState(this.stateMachine))},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(i.State);o.BoardStoppedState=c,cc._RF.pop()},{"../../SlotMachine":"SlotMachine","../State":"State","./BoardIdleState":"BoardIdleState"}],BoardStoppingState:[function(t,e,o){"use strict";cc._RF.push(e,"99affaikppDy7BGEng8bmvB","BoardStoppingState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BoardStoppingState=void 0;var a=t("../State"),i=t("./BoardStoppedState"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){},e.prototype.onUpdate=function(){this.stateMachine.areAllReelsIdling()&&this.stateMachine.setState(new i.BoardStoppedState(this.stateMachine))},e.prototype.onExit=function(){},e}(a.State);o.BoardStoppingState=p,cc._RF.pop()},{"../State":"State","./BoardStoppedState":"BoardStoppedState"}],FSM:[function(t,e,o){"use strict";cc._RF.push(e,"ae387e06NVMDL2BCqnvlsi5","FSM");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.FSM=void 0;var i=cc._decorator,p=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setState=function(t){this.currentState&&this.currentState.onExit(),this.currentState=t,this.currentState.onStart()},e.prototype.update=function(t){var e;null===(e=this.currentState)||void 0===e||e.onUpdate(t)},a([p],e)}(cc.Component));o.FSM=c,cc._RF.pop()},{}],GameConfig:[function(t,e,o){"use strict";cc._RF.push(e,"ef763Ym5h1BzLdqfPuKkxKE","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfig=void 0,o.GameConfig={TARGET_FPS:60,MAX_REEL_SPEED:50,NUM_VISIBLE_REELS:5,NUM_SYMBOLS_PER_REEL:3,SPIN_SPEED_INCREASE_STEP:2,STOP_ANIMATION_DURATION:.35,SYMBOLS_BUNDLE_NAME:"symbols",AVAILABLE_SYMBOLS:["1","2","3","4","5","6","7","8","K"],STOP_DELAY_WHEN_RECIEVE_RESPONSE:2e3,DELAY_TIME_ON_START:[0,.1,.2,.4,.6],DELAY_TIME_ON_STOP:[0,.1,.2,.4,.6]},cc._RF.pop()},{}],ReelHandler:[function(t,e,o){"use strict";cc._RF.push(e,"7335508Tp9G75rY+h4XeEgD","ReelHandler");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var a=arguments[e],i=0,p=a.length;i<p;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0});var p=t("./GameConfig"),c=t("./SlotMachine"),s=t("./States/FSM"),u=t("./States/ReelStates/ReelIdleState"),l=t("./States/ReelStates/ReelSpinningState"),S=t("./States/ReelStates/ReelStartStopState"),f=t("./SymbolHandler"),d=cc._decorator,_=d.ccclass,y=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.symbolPrefab=null,e.reelIndex=0,e.spinSpeed=0,e.symbols=[],e.reservedSymbols=[],e}return r(e,t),e.prototype.init=function(t){this.reelIndex=t;for(var e=0;e<p.GameConfig.NUM_SYMBOLS_PER_REEL+1;e++){var o=this.createSymbol(e);this.symbols.push(o)}for(e=0;e<p.GameConfig.NUM_SYMBOLS_PER_REEL;e++)(o=this.createSymbol(e)).node.opacity=0,this.reservedSymbols.push(o);this.node.height=this.symbols[0].node.height*p.GameConfig.NUM_SYMBOLS_PER_REEL},e.prototype.createSymbol=function(t){var e=cc.instantiate(this.symbolPrefab),o=e.getComponent(f.default);return o.init(t),o.setSymbol(this.getRandomSymbol()),e.parent=this.node,e.x=0,e.y=this.getSymbolYByIndex(e,t),o},e.prototype.getSymbolYByIndex=function(t,e){return-t.height/2-e*t.height},e.prototype.setReelIndex=function(t){this.reelIndex=t},e.prototype.getRandomSymbol=function(){return p.GameConfig.AVAILABLE_SYMBOLS[Math.floor(Math.random()*p.GameConfig.AVAILABLE_SYMBOLS.length)]},e.prototype.isIdle=function(){return this.currentState instanceof u.ReelIdleState},e.prototype.isSpinning=function(){return this.currentState instanceof l.ReelSpinningState},e.prototype.startSpin=function(){this.spinSpeed=0,this.setState(new l.ReelSpinningState(this))},e.prototype.stopSpin=function(){this.setState(new S.ReelStartStopState(this))},e.prototype.mapSymbols=function(){var t=this.getResultSymbols();this.reservedSymbols.forEach(function(e,o){e.setSymbol(t[o])})},e.prototype.getResultSymbols=function(){for(var t=c.default.getInstance().currentSpinInfo,e=p.GameConfig.NUM_VISIBLE_REELS,o=[],n=0;n<p.GameConfig.NUM_SYMBOLS_PER_REEL;n++)o.push(t[this.reelIndex+n*e]);return o},e.prototype.onUpdateSpin=function(t){var e=this,o=i(this.symbols);this.symbols.forEach(function(n){e.spinSpeed===p.GameConfig.MAX_REEL_SPEED&&n.getComponent(f.default).setBlur(!0),n.node.y-=e.spinSpeed*t*p.GameConfig.TARGET_FPS,n.node.y<=-e.node.height-n.node.height/2&&(n.node.y=e.symbols[0].node.y+n.node.height,n.setSymbol(e.getRandomSymbol()),o.unshift(o.pop()))}),this.symbols=o,this.spinSpeed+=p.GameConfig.SPIN_SPEED_INCREASE_STEP*t*p.GameConfig.TARGET_FPS,this.spinSpeed>=p.GameConfig.MAX_REEL_SPEED&&(this.spinSpeed=p.GameConfig.MAX_REEL_SPEED)},e.prototype.onStopSpin=function(){var t=this;this.mapSymbols(),this.symbols.forEach(function(e,o){e.setBlur(!1);var n=t.getSymbolYByIndex(e.node,o+p.GameConfig.NUM_SYMBOLS_PER_REEL);cc.tween(e.node).to(p.GameConfig.STOP_ANIMATION_DURATION,{y:n},{easing:"backOut"}).start()}),this.reservedSymbols.forEach(function(e,o){e.setBlur(!1);var n=t.getSymbolYByIndex(e.node,o);e.node.y=n+p.GameConfig.NUM_SYMBOLS_PER_REEL*e.node.height,e.node.opacity=255,cc.tween(e.node).to(p.GameConfig.STOP_ANIMATION_DURATION,{y:n},{easing:"backOut"}).start()})},e.prototype.swapActiveAndReservedSymbols=function(){var t=this.symbols.pop(),e=i(this.symbols);this.symbols=this.reservedSymbols,this.symbols.push(t),this.reservedSymbols=e,this.reservedSymbols.forEach(function(t,e){t.symbolIndex=e,t.node.opacity=0})},a([y(cc.Prefab)],e.prototype,"symbolPrefab",void 0),a([_],e)}(s.FSM);o.default=h,cc._RF.pop()},{"./GameConfig":"GameConfig","./SlotMachine":"SlotMachine","./States/FSM":"FSM","./States/ReelStates/ReelIdleState":"ReelIdleState","./States/ReelStates/ReelSpinningState":"ReelSpinningState","./States/ReelStates/ReelStartStopState":"ReelStartStopState","./SymbolHandler":"SymbolHandler"}],ReelIdleState:[function(t,e,o){"use strict";cc._RF.push(e,"ce369jXd2tJH7cUyloWXXe6","ReelIdleState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ReelIdleState=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(t("../State").State);o.ReelIdleState=a,cc._RF.pop()},{"../State":"State"}],ReelSpinningState:[function(t,e,o){"use strict";cc._RF.push(e,"e8868kMp4VPy5nSR9b9i+Av","ReelSpinningState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ReelSpinningState=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){},e.prototype.onUpdate=function(t){this.stateMachine.onUpdateSpin(t)},e.prototype.onExit=function(){},e}(t("../State").State);o.ReelSpinningState=a,cc._RF.pop()},{"../State":"State"}],ReelStartSpinState:[function(t,e,o){"use strict";cc._RF.push(e,"d16dfWMsgZGEaByOep+J4uq","ReelStartSpinState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ReelStartSpinState=void 0;var a=t("../State"),i=t("./ReelSpinningState"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){this.stateMachine.setState(new i.ReelSpinningState(this.stateMachine))},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(a.State);o.ReelStartSpinState=p,cc._RF.pop()},{"../State":"State","./ReelSpinningState":"ReelSpinningState"}],ReelStartStopState:[function(t,e,o){"use strict";cc._RF.push(e,"5552faqoGdPGoo6GJIhcGAK","ReelStartStopState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ReelStartStopState=void 0;var a=t("../State"),i=t("./ReelStoppingState"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){this.stateMachine.onStopSpin(),this.stateMachine.setState(new i.ReelStoppingState(this.stateMachine))},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(a.State);o.ReelStartStopState=p,cc._RF.pop()},{"../State":"State","./ReelStoppingState":"ReelStoppingState"}],ReelStoppingState:[function(t,e,o){"use strict";cc._RF.push(e,"4103efQ169LO63d6C/khONv","ReelStoppingState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ReelStoppingState=void 0;var a=t("../../GameConfig"),i=t("../State"),p=t("./ReelStopppedState"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){var t=this;setTimeout(function(){t.stateMachine.swapActiveAndReservedSymbols(),t.stateMachine.setState(new p.ReelStopppedState(t.stateMachine))},1e3*a.GameConfig.STOP_ANIMATION_DURATION)},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(i.State);o.ReelStoppingState=c,cc._RF.pop()},{"../../GameConfig":"GameConfig","../State":"State","./ReelStopppedState":"ReelStopppedState"}],ReelStopppedState:[function(t,e,o){"use strict";cc._RF.push(e,"ac689QqoAFBJpp9AGBXH5uX","ReelStopppedState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ReelStopppedState=void 0;var a=t("../State"),i=t("./ReelIdleState"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onStart=function(){this.stateMachine.setState(new i.ReelIdleState(this.stateMachine))},e.prototype.onUpdate=function(){},e.prototype.onExit=function(){},e}(a.State);o.ReelStopppedState=p,cc._RF.pop()},{"../State":"State","./ReelIdleState":"ReelIdleState"}],ResourceManager:[function(t,e,o){"use strict";cc._RF.push(e,"6932bElzotJxYsagRIECXvj","ResourceManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResourceManager=void 0;var n=t("./GameConfig"),r=function(){function t(){}return t.loadSymbolAssetBundle=function(){var t=this;return new Promise(function(e,o){cc.assetManager.loadBundle(n.GameConfig.SYMBOLS_BUNDLE_NAME,function(n,r){n&&(alert("Error while loading symbol bundle, please retry later."),location.reload(),o()),r.loadDir("/",cc.SpriteFrame,function(o,n){n.forEach(function(e){t.symbolSpriteFrameCollection[e.name]=e}),e()})})})},t.getSymbolSprite=function(t){return this.symbolSpriteFrameCollection[t]},t.symbolSpriteFrameCollection={},t}();o.ResourceManager=r,cc._RF.pop()},{"./GameConfig":"GameConfig"}],Server:[function(t,e,o){"use strict";cc._RF.push(e,"621d0GyLq1DyJlxbdPO+Hma","Server"),Object.defineProperty(o,"__esModule",{value:!0});var n=[["1","2","3","4","5","6","7","K","1","2","3","4","5","6","7"],["1","2","6","2","1","6","4","K","5","2","8","3","3","3","3"],["1","2","6","3","4","7","K","K","K","1","3","5","2","4","2"],["1","2","3","4","3","5","3","8","3","1","5","3","4","5","7"],["2","7","3","2","3","8","7","3","K","1","5","3","4","6","5"],["2","7","3","K","6","8","5","2","K","1","5","3","4","5","8"]],r=function(){function t(){this._dataRespondCallbacks=[]}return t.prototype.registerDataRespondEvent=function(t){this._dataRespondCallbacks.push(t)},t.prototype.requestSpinData=function(){var t=this,e=this._randomRange(100,1500)+(Math.random()>.8?2e3:0);window.setTimeout(function(){var e=t._randomRange(0,n.length-1,!0),o=[];Object.assign(o,n[e]),t._dataRespondCallbacks.forEach(function(t){t(o)})},e)},t.prototype._randomRange=function(t,e,o){void 0===o&&(o=!1);var n=e-t,r=t+Math.random()*n;return o&&(r=Math.round(r)),r},t}();o.default=r,cc._RF.pop()},{}],SlotMachine:[function(t,e,o){"use strict";cc._RF.push(e,"53f77sOAFpEvYd/EhkoKpcu","SlotMachine");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./BoardManager"),p=t("./ResourceManager"),c=t("./Server/Server"),s=cc._decorator,u=s.ccclass,l=s.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingNode=null,e.spinButton=null,e.server=new c.default,e.currentSpinInfo=[],e}var o;return r(e,t),o=e,e.getInstance=function(){return this.inst},e.prototype.onLoad=function(){var t=this;o.inst=this,this.server.registerDataRespondEvent(this.onReceivedResponse.bind(this)),p.ResourceManager.loadSymbolAssetBundle().then(function(){i.default.getInstance().initReels(),t.loadingNode.active=!1,t.spinButton.interactable=!0})},e.prototype.onSpin=function(){this.server.requestSpinData(),i.default.getInstance().spinReels(),this.spinButton.interactable=!1},e.prototype.onReceivedResponse=function(t){this.currentSpinInfo=t,i.default.getInstance().onReceivedResponse()},e.inst=null,a([l(cc.Node)],e.prototype,"loadingNode",void 0),a([l(cc.Button)],e.prototype,"spinButton",void 0),o=a([u],e)}(cc.Component);o.default=S,cc._RF.pop()},{"./BoardManager":"BoardManager","./ResourceManager":"ResourceManager","./Server/Server":"Server"}],State:[function(t,e,o){"use strict";cc._RF.push(e,"dbc1eeG/51DXrTuDzVuvWeb","State"),Object.defineProperty(o,"__esModule",{value:!0}),o.State=void 0;o.State=function(t){this.stateMachine=t},cc._RF.pop()},{}],SymbolHandler:[function(t,e,o){"use strict";cc._RF.push(e,"f6d4bc78zRIQqHmfBAxQtCC","SymbolHandler");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./ResourceManager"),p=cc._decorator,c=p.ccclass,s=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.symbolIndex=-1,e.isBlur=!1,e.normalSpriteFrame=null,e.blurSpriteFrame=null,e}return r(e,t),e.prototype.init=function(t){this.symbolIndex=t},e.prototype.setSymbol=function(t){this.normalSpriteFrame=i.ResourceManager.getSymbolSprite("symbol_"+t),this.blurSpriteFrame=i.ResourceManager.getSymbolSprite("symbol_"+t+"_blur"),this.updateSpriteFrame()},e.prototype.setBlur=function(t,e){void 0===e&&(e=!0),this.isBlur!==t&&(this.isBlur=t,e&&this.updateSpriteFrame())},e.prototype.updateSpriteFrame=function(){this.sprite.spriteFrame=this.isBlur?this.blurSpriteFrame:this.normalSpriteFrame},a([s(cc.Sprite)],e.prototype,"sprite",void 0),a([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./ResourceManager":"ResourceManager"}]},{},["BoardManager","GameConfig","ReelHandler","ResourceManager","Server","SlotMachine","BoardIdleState","BoardSpinningState","BoardStartSpinState","BoardStartStopState","BoardStoppedState","BoardStoppingState","FSM","ReelIdleState","ReelSpinningState","ReelStartSpinState","ReelStartStopState","ReelStoppingState","ReelStopppedState","State","SymbolHandler"]);